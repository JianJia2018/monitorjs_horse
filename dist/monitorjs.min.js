!function(){"use strict";class e{static get JS_ERROR(){return"js_error"}static get RESOURCE_ERROR(){return"resource_error"}static get VUE_ERROR(){return"vue_error"}static get PROMISE_ERROR(){return"promise_error"}static get AJAX_ERROR(){return"ajax_error"}static get CONSOLE_INFO(){return"console_info"}static get CONSOLE_WARN(){return"console_warn"}static get CONSOLE_ERROR(){return"console_error"}static get CROSS_SCRIPT_ERROR(){return"cross_srcipt_error"}static get UNKNOW_ERROR(){return"unknow_error"}static get PERFORMANCE(){return"performance"}static get NETWORK_SPEED(){return"network_speed"}}class r{static get ERROR(){return"Error"}static get WARN(){return"Warning"}static get INFO(){return"Info"}}class t{static get AXIOS(){return"axios"}static get DEFAULT(){return"default"}}var n=function(){var e="undefined"!=typeof self?self:this,r=e||{},t={navigator:"undefined"!=typeof e.navigator?e.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},n={getMatchMap:function(e){return{Trident:e.indexOf("Trident")>-1||e.indexOf("NET CLR")>-1,Presto:e.indexOf("Presto")>-1,WebKit:e.indexOf("AppleWebKit")>-1,Gecko:e.indexOf("Gecko/")>-1,Safari:e.indexOf("Safari")>-1,Chrome:e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1,IE:e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1,Edge:e.indexOf("Edge")>-1,Firefox:e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1,"Firefox Focus":e.indexOf("Focus")>-1,Chromium:e.indexOf("Chromium")>-1,Opera:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,Vivaldi:e.indexOf("Vivaldi")>-1,Yandex:e.indexOf("YaBrowser")>-1,Arora:e.indexOf("Arora")>-1,Lunascape:e.indexOf("Lunascape")>-1,QupZilla:e.indexOf("QupZilla")>-1,"Coc Coc":e.indexOf("coc_coc_browser")>-1,Kindle:e.indexOf("Kindle")>-1||e.indexOf("Silk/")>-1,Iceweasel:e.indexOf("Iceweasel")>-1,Konqueror:e.indexOf("Konqueror")>-1,Iceape:e.indexOf("Iceape")>-1,SeaMonkey:e.indexOf("SeaMonkey")>-1,Epiphany:e.indexOf("Epiphany")>-1,360:e.indexOf("QihooBrowser")>-1||e.indexOf("QHBrowser")>-1,"360EE":e.indexOf("360EE")>-1,"360SE":e.indexOf("360SE")>-1,UC:e.indexOf("UC")>-1||e.indexOf(" UBrowser")>-1,QQBrowser:e.indexOf("QQBrowser")>-1,QQ:e.indexOf("QQ/")>-1,Baidu:e.indexOf("Baidu")>-1||e.indexOf("BIDUBrowser")>-1,Maxthon:e.indexOf("Maxthon")>-1,Sogou:e.indexOf("MetaSr")>-1||e.indexOf("Sogou")>-1,LBBROWSER:e.indexOf("LBBROWSER")>-1,"2345Explorer":e.indexOf("2345Explorer")>-1,TheWorld:e.indexOf("TheWorld")>-1,XiaoMi:e.indexOf("MiuiBrowser")>-1,Quark:e.indexOf("Quark")>-1,Qiyu:e.indexOf("Qiyu")>-1,Wechat:e.indexOf("MicroMessenger")>-1,Taobao:e.indexOf("AliApp(TB")>-1,Alipay:e.indexOf("AliApp(AP")>-1,Weibo:e.indexOf("Weibo")>-1,Douban:e.indexOf("com.douban.frodo")>-1,Suning:e.indexOf("SNEBUY-APP")>-1,iQiYi:e.indexOf("IqiyiApp")>-1,Windows:e.indexOf("Windows")>-1,Linux:e.indexOf("Linux")>-1||e.indexOf("X11")>-1,"Mac OS":e.indexOf("Macintosh")>-1,Android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,Ubuntu:e.indexOf("Ubuntu")>-1,FreeBSD:e.indexOf("FreeBSD")>-1,Debian:e.indexOf("Debian")>-1,"Windows Phone":e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,BlackBerry:e.indexOf("BlackBerry")>-1||e.indexOf("RIM")>-1,MeeGo:e.indexOf("MeeGo")>-1,Symbian:e.indexOf("Symbian")>-1,iOS:e.indexOf("like Mac OS X")>-1,"Chrome OS":e.indexOf("CrOS")>-1,WebOS:e.indexOf("hpwOS")>-1,Mobile:e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1,Tablet:e.indexOf("Tablet")>-1||e.indexOf("Nexus 7")>-1,iPad:e.indexOf("iPad")>-1}},matchInfoMap:function(e){var r=t.navigator.userAgent||{},i=n.getMatchMap(r);for(var o in t.infoMap)for(var a=0;a<t.infoMap[o].length;a++){var s=t.infoMap[o][a];i[s]&&(e[o]=s)}},getOS:function(){return n.matchInfoMap(this),this.os},getOSVersion:function(){var e=this,r=t.navigator.userAgent||{};e.osVersion="";var n={Windows:function(){var e=r.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");return{6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[e]||e},Android:function(){return r.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return r.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return r.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return r.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return r.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return r.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return n[e.os]&&(e.osVersion=n[e.os](),e.osVersion==r&&(e.osVersion="")),e.osVersion},getOrientationStatu:function(){return window.matchMedia("(orientation: portrait)").matches?"竖屏":"横屏"},getDeviceType:function(){var e=this;return e.device="PC",n.matchInfoMap(e),e.device},getNetwork:function(){return navigator&&navigator.connection&&navigator.connection.effectiveType},getLanguage:function(){var e;return this.language=((e=(t.navigator.browserLanguage||t.navigator.language).split("-"))[1]&&(e[1]=e[1].toUpperCase()),e.join("_")),this.language},createFingerprint:function(e){var r=document.createElement("canvas"),t=r.getContext("2d"),n=e||window.location.host;t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="tencent",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17);var i=r.toDataURL().replace("data:image/png;base64,","");return function(e){var r,t,n,i="";for(r=0,t=(e+="").length;r<t;r++)i+=(n=e.charCodeAt(r).toString(16)).length<2?"0"+n:n;return i}(atob(i).slice(-16,-12))},getBrowserInfo:function(){var e=this;n.matchInfoMap(e);var i=t.navigator.userAgent||{},o=function(e,r){var n=t.navigator.mimeTypes;for(var i in n)if(n[i][e]==r)return!0;return!1},a=n.getMatchMap(i),s=!1;if(r.chrome){var c=i.replace(/^.*Chrome\/([\d]+).*$/,"$1");c>36&&r.showModalDialog?s=!0:c>45&&(s=o("type","application/vnd.chromium.remoting-viewer"))}if(a.Baidu&&a.Opera&&(a.Baidu=!1),a.Mobile&&(a.Mobile=!(i.indexOf("iPad")>-1)),s&&(o("type","application/gameplugin")||t.navigator&&"undefined"==typeof t.navigator.connection.saveData?a["360SE"]=!0:a["360EE"]=!0),a.IE||a.Edge)switch(window.screenTop-window.screenY){case 71:case 74:case 99:break;case 102:a["360EE"]=!0;break;case 75:case 74:case 105:break;case 104:a["360SE"]=!0}var d={Safari:function(){return i.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return i.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return i.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return i.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return i.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return i.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return i.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return i.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return i.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return i.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return i.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return i.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return i.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return i.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return i.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return i.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return i.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return i.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return i.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return i.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return i.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){return{63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[i.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"360EE":function(){return{69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[i.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},Maxthon:function(){return i.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return i.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return i.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return i.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return i.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return i.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){return{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"2345Explorer":function(){return i.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return i.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return i.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return i.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return i.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return i.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},Taobao:function(){return i.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return i.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return i.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return i.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return i.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return i.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};return e.browserVersion="",d[e.browser]&&(e.browserVersion=d[e.browser](),e.browserVersion==i&&(e.browserVersion="")),"Edge"==e.browser&&(e.engine="EdgeHTML"),"Chrome"==e.browser&&parseInt(e.browserVersion)>27&&(e.engine="Blink"),"Opera"==e.browser&&parseInt(e.browserVersion)>12&&(e.engine="Blink"),"Yandex"==e.browser&&(e.engine="Blink"),e.browser+"（版本: "+e.browserVersion+"&nbsp;&nbsp;内核: "+e.engine+"）"}},i={DeviceInfoObj:function(e){e=e||{domain:""};var i={deviceType:n.getDeviceType(),OS:n.getOS(),OSVersion:n.getOSVersion(),screenHeight:r.screen.height,screenWidth:r.screen.width,language:n.getLanguage(),netWork:n.getNetwork(),orientation:n.getOrientationStatu(),browserInfo:n.getBrowserInfo(),fingerprint:n.createFingerprint(e.domain),userAgent:t.navigator.userAgent};if(!e.info||0==e.info.length)return i;var o={};for(var a in i)e.info.forEach((function(e){e.toLowerCase()==a.toLowerCase()&&(o[e=a]=i[e])}));return o}};return{getDeviceInfo:function(e){return i.DeviceInfoObj(e)}}}(),i={type:e=>Object.prototype.toString.call(e).replace(/\[object\s|\]/g,""),isFunction(e){return"Function"===this.type(e)},isArray(e){return"Array"===this.type(e)},isNull:e=>e==undefined||""==e||null==e,objectIsNull:e=>"{}"===JSON.stringify(e),isObject(e){return"Object"===this.type(e)}};var o=class{constructor(e){this.url=e}report(e,r){this.checkUrl(this.url)&&this.sendInfo(e,r)}sendInfo(e,r){let t=JSON.stringify(e);try{if(fetch&&r)return void fetch(this.url,{headers:{"Content-Type":"application/json"},method:"POST",body:t,mode:"same-origin",keepalive:!0})}catch(i){}try{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.setRequestHeader("Content-Type","application/json"),n.send(t)}catch(i){}}reportByImg(e){if(this.checkUrl(this.url))try{(new Image).src=this.url+"?v="+(new Date).getTime()+"&"+this.formatParams(e)}catch(r){}}reportByNavigator(e){navigator.sendBeacon&&navigator.sendBeacon(this.url,e)}formatParams(e){var r=[];for(var t in e)r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")}checkUrl(e){if(!e)return!1;return/^[hH][tT][tT][pP]([sS]?):\/\//.test(e)}},a={isStop:!0,queues:[],add:function(e,r){this.queues.push({reportUrl:e,data:r})},fire:function(){if(!this.queues||0===this.queues.length)return void(this.isStop=!0);this.isStop=!1;let e=this.queues[0];e.reportUrl&&new o(e.reportUrl).report(e.data),this.queues.splice(0,1),this.fire()}};var s=class{constructor(t){this.category=e.UNKNOW_ERROR,this.level=r.INFO,this.msg="",this.url="",this.line="",this.col="",this.errorObj="",this.reportUrl=t.reportUrl,this.extendsInfo=t.extendsInfo,this.errorAfter=t.errorAfter}recordError(){this.handleRecordError(),setTimeout((()=>{a.isStop&&a.fire()}),100)}handleRecordError(){try{if(!this.msg)return;if(this.reportUrl&&this.url&&this.url.toLowerCase().indexOf(this.reportUrl.toLowerCase())>=0)return;let e=this.handleErrorInfo();a.add(this.reportUrl,e),i.isFunction(this.errorAfter)&&this.errorAfter(e)}catch(e){}}handleErrorInfo(){let r="错误类别: "+this.category+"\r\n";switch(r+="日志信息: "+this.msg+"\r\n",r+="url: "+encodeURIComponent(this.url)+"\r\n",this.category){case e.JS_ERROR:r+="错误行号: "+this.line+"\r\n",r+="错误列号: "+this.col+"\r\n",this.errorObj&&this.errorObj.stack&&(r+="错误栈: "+this.errorObj.stack+"\r\n");break;default:r+="其他错误: "+JSON.stringify(this.errorObj)+"\r\n"}let t=this.getDeviceInfo();r+="设备信息: "+t;let n=this.getExtendsInfo();return n.category=this.category,n.logType=this.level,n.logInfo=r,n.deviceInfo=t,n}getExtendsInfo(){try{let r,t={},n=this.extendsInfo||{};for(var e in i.isFunction(n.getDynamic)&&(r=n.getDynamic()),i.isObject(r)&&(n={...n,...r}),n)i.isFunction(n[e])||(t[e]=n[e]);return t}catch(r){return{}}}getDeviceInfo(){try{let e=n.getDeviceInfo();return JSON.stringify(e)}catch(e){return""}}};var c=class{constructor(e){this.params=e}handleError(e,r){switch(e){case t.AXIOS:new d(this.params).handleError(r);break;default:new u(this.params).handleError()}}};class d extends s{constructor(e){super(e)}handleError(t){t&&t.config&&t.config.url&&(this.url=t.config.url),this.level=r.WARN,this.category=e.AJAX_ERROR,this.msg=JSON.stringify(t),this.recordError()}}class u extends s{constructor(e){super(e)}handleError(){if(!window.XMLHttpRequest)return;let t=XMLHttpRequest.prototype.send,n=t=>{try{t&&t.currentTarget&&200!==t.currentTarget.status&&(this.level=r.WARN,this.category=e.AJAX_ERROR,this.msg=t.target.response,this.url=t.target.responseURL,this.errorObj={status:t.target.status,statusText:t.target.statusText},this.recordError())}catch(n){}};XMLHttpRequest.prototype.send=function(){if(this.addEventListener)this.addEventListener("error",n),this.addEventListener("load",n),this.addEventListener("abort",n);else{let e=this.onreadystatechange;this.onreadystatechange=function(r){e.apply(this,arguments),4===this.readyState&&n(r)}}return t.apply(this,arguments)}}}!function(){window.console||(window.console={});["tInfo","tWarn","tError"].forEach(((e,r)=>{console[e]||(console[e]=function(){})}))}();var l=class extends s{constructor(e){super(e)}handleError(){this.registerInfo(),this.registerWarn(),this.registerError()}registerInfo(){let t=this;console.tInfo=function(){t.handleLog(r.INFO,e.CONSOLE_INFO,arguments)}}registerWarn(){let t=this;console.tWarn=function(){t.handleLog(r.WARN,e.CONSOLE_WARN,arguments)}}registerError(){let t=this;console.tError=function(){t.handleLog(r.ERROR,e.CONSOLE_ERROR,arguments)}}handleLog(e,r,t){try{this.level=e;let n=[...t];this.msg=n.join("\r\n"),this.url=location.href,this.category=r,this.recordError()}catch(n){}}};var h=class extends s{constructor(e){super(e)}handleError(){window.onerror=(t,n,i,o,a)=>{try{this.level=r.WARN,this.category=e.JS_ERROR,this.msg=t,this.url=n,this.line=i,this.col=o,this.errorObj=a,this.recordError()}catch(a){}}}};var f=class extends s{constructor(e){super(e)}handleError(){window.addEventListener("unhandledrejection",(t=>{try{if(!t||!t.reason)return;t.reason.config&&t.reason.config.url&&(this.url=t.reason.config.url),this.level=r.WARN,this.category=e.PROMISE_ERROR,this.msg=t.reason,this.recordError()}catch(n){}}),!0)}};var p=class extends s{constructor(e){super(e)}handleError(){window.addEventListener("error",(t=>{try{if(!t)return;this.category=e.RESOURCE_ERROR;let n=t.target||t.srcElement;if(!(n instanceof HTMLScriptElement||n instanceof HTMLLinkElement||n instanceof HTMLImageElement))return;this.level="IMG"===n.tagName.toUpperCase()?r.WARN:r.ERROR,this.msg="加载 "+n.tagName+" 资源错误",this.url=n.src||n.href,this.errorObj=n,this.recordError()}catch(n){}}),!0)}};var g=class extends s{constructor(e){super(e)}handleError(t){t&&(t.config.errorHandler=(t,n,i)=>{try{let o={message:t.message,stack:t.stack,info:i};"[object Object]"===Object.prototype.toString.call(n)&&(o.componentName=n._isVue?n.$options.name||n.$options._componentTag:n.name,o.propsData=n.$options.propsData),this.level=r.WARN,this.msg=JSON.stringify(o),this.category=e.VUE_ERROR,this.recordError()}catch(t){}})}};const m={getTiming(){try{if(!window.performance||!window.performance.timing)return;var e=window.performance.timing,r={};return e.loadEventEnd-e.loadEventStart<0?void setTimeout((function(){m.getTiming()}),200):(r.redirectTime=(e.redirectEnd-e.redirectStart).toFixed(2),r.dnsTime=(e.domainLookupEnd-e.domainLookupStart).toFixed(2),r.ttfbTime=(e.responseStart-e.navigationStart).toFixed(2),r.appcacheTime=(e.domainLookupStart-e.fetchStart).toFixed(2),r.unloadTime=(e.unloadEventEnd-e.unloadEventStart).toFixed(2),r.tcpTime=(e.connectEnd-e.connectStart).toFixed(2),r.reqTime=(e.responseEnd-e.responseStart).toFixed(2),r.analysisTime=(e.domComplete-e.domInteractive).toFixed(2),r.blankTime=(e.domLoading-e.navigationStart).toFixed(2),r.domReadyTime=(e.domContentLoadedEventEnd-e.navigationStart).toFixed(2),r.loadPageTime=(e.loadEventEnd-e.navigationStart).toFixed(2),r)}catch(t){}},getEntries(e){if(e=e||[],!window.performance||!window.performance.getEntries)return;let r=[],t=window.performance.getEntries();return t&&0!=t.length?(t.forEach(((t,n)=>{let i={};e.indexOf(t.initiatorType)>-1&&(i.name=t.name,i.initiatorType=t.initiatorType,i.nextHopProtocol=t.nextHopProtocol,i.redirectTime=(t.redirectEnd-t.redirectStart).toFixed(2),i.dnsTime=(t.domainLookupEnd-t.domainLookupStart).toFixed(2),i.tcpTime=(t.connectEnd-t.connectStart).toFixed(2),i.ttfbTime=(t.responseStart-t.requestStart).toFixed(2),i.responseTime=(t.responseEnd-t.responseStart).toFixed(2),i.reqTotalTime=(t.responseEnd-t.requestStart).toFixed(2),r.push(i))})),r):r}};var E=m;var O=class extends s{constructor(r){super(r||{}),r.isPage=!1!==r.isPage,r.isResource=!1!==r.isResource,this.isPage=r.isPage,this.isResource=r.isResource,this.usefulType=this.getSourceType(r),this.outTime=50,this.config={resourceList:[],performance:{}},this.category=e.PERFORMANCE,this.pageId=r.pageId||"",this.url=r.url||""}getSourceType(e){let r=[];return!1!==e.isRScript&&r.push("script"),!1!==e.isRCSS&&r.push("css"),!1!==e.isRFetch&&r.push("fetch"),!1!==e.isRXHR&&r.push("xmlhttprequest"),!1!==e.isRLink&&r.push("link"),!1!==e.isRIMG&&r.push("img"),r}record(){try{this.isPage&&(this.config.performance=E.getTiming()),this.isResource&&(this.config.resourceList=E.getEntries(this.usefulType));let e={curTime:(new Date).format("yyyy-MM-dd HH:mm:ss"),performance:this.config.performance,resourceList:this.config.resourceList,markUser:this.markUser(),markUv:this.markUv(),pageId:this.pageId,deviceInfo:this.getDeviceInfo()},t={...this.getExtendsInfo(),category:this.category,logType:r.INFO,logInfo:JSON.stringify(e)};localStorage.setItem("page_performance",JSON.stringify(t)),new o(this.url).report(t,!0),this.clearPerformance()}catch(e){}}randomString(e){e=e||10;var r="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",t=r.length,n="";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*t));return n+(new Date).getTime()}markUser(){let e=sessionStorage.getItem("ps_markUser")||"";return e||(e=this.randomString(),sessionStorage.setItem("ps_markUser",e)),e}markUv(){const e=new Date;let r=localStorage.getItem("ps_markUv")||"";const t=localStorage.getItem("ps_markUvTime")||"",n=e.format("yyyy/MM/dd 23:59:59");return(!r&&!t||e.getTime()>1*t)&&(r=this.randomString(),localStorage.setItem("ps_markUv",r),localStorage.setItem("ps_markUvTime",new Date(n).getTime())),r}clearPerformance(){window.performance&&window.performance.clearResourceTimings&&(performance.clearResourceTimings(),this.config.performance={},this.config.resourceList="")}};var x=class extends s{constructor(r){super(r||{}),this.category=e.NETWORK_SPEED,this.pageId=r.pageId||"",this.url=r.url||""}downloadSize=241797;filePath="https://file.40017.cn/tcservice/common/imags/network_speed.png";startTime=0;endTime=0;timeInterval=6e4;now(){return performance.now()||performance.webkitNow()||performance.msNow()||performance.oNow()||performance.mozNow()||(new Date).getTime()}reportNetworkSpeed(){this.getSpeed(),setInterval((()=>{this.getSpeed()}),this.timeInterval)}getSpeed(){try{let e,t=new XMLHttpRequest;t.onreadystatechange=()=>{if(2===t.readyState&&(this.startTime=Date.now()),4===t.readyState&&200===t.status){this.endTime=Date.now(),e=t.responseText.length;let n=e/((this.endTime-this.startTime)/1e3)/1024;n=n.toFixed(2);let i={...this.getExtendsInfo(),category:this.category,logType:r.INFO,logInfo:JSON.stringify({curTime:(new Date).format("yyyy-MM-dd HH:mm:ss"),pageId:this.pageId,networkSpeed:n,deviceInfo:this.getDeviceInfo()})};new o(this.url).report(i)}},t.open("GET",this.filePath+"?rand="+Math.random(),!0),t.send()}catch(e){}}getSpeedByImg(){let e=new Image;e.onload=()=>{this.endTime=this.now(),this.calcSpeed()},this.startTime=this.now(),e.src=this.filePath+"?rand="+this.startTime}calcSpeed(){let e=(this.endTime-this.startTime)/1e3,r=((8*this.downloadSize/e).toFixed(2)/1024).toFixed(2);return{speedKbps:r,speedMbps:(r/1024).toFixed(2)}}};Date.prototype.format=function(e){let r={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+t[this.getDay()+""]));for(let n in r)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return e};var S=class{constructor(){this.jsError=!0,this.promiseError=!0,this.resourceError=!0,this.ajaxError=!0,this.consoleError=!1,this.vueError=!1}init(e){e=e||{},this.jsError=!(!1===e.jsError),this.promiseError=!(!1===e.promiseError),this.resourceError=!(!1===e.resourceError),this.ajaxError=!(!1===e.ajaxError),this.consoleError=!0===e.consoleError,this.vueError=!0===e.vueError;let r={reportUrl:e.url,extendsInfo:e.extendsInfo||{},errorAfter:e.errorAfter};this.jsError&&new h(r).handleError(),this.promiseError&&new f(r).handleError(),this.resourceError&&new p(r).handleError(),this.ajaxError&&new c(r).handleError(t.DEFAULT),this.consoleError&&new l(r).handleError(),this.vueError&&e.vue&&new g(r).handleError(e.vue)}monitorPerformance(e){new x(e=e||{}).reportNetworkSpeed();let r=()=>{new O(e).record()};window.removeEventListener("unload",r),window.addEventListener("unload",r)}};window.MonitorJS=S}();
